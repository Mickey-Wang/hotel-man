webpackJsonp([3],{100:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(168),o=i.n(s),a=i(163),n=i.n(a);e.default={data:function(){return{}},components:{city:o.a,"left-nav":n.a}}},125:function(t,e){},138:function(t,e){},150:function(t,e){},163:function(t,e,i){i(125);var s=i(7)(i(92),i(172),null,null);s.options.__file="E:\\devCode\\hotel-man\\src\\views\\componets\\navigation\\leftNavCity.vue",s.esModule&&Object.keys(s.esModule).some(function(t){return"default"!==t&&"__esModule"!==t}),s.options.functional,t.exports=s.exports},168:function(t,e,i){i(138);var s=i(7)(i(97),i(186),"data-v-53c4f026",null);s.options.__file="E:\\devCode\\hotel-man\\src\\views\\componets\\tables\\cityExamine.vue",s.esModule&&Object.keys(s.esModule).some(function(t){return"default"!==t&&"__esModule"!==t}),s.options.functional,t.exports=s.exports},172:function(t,e,i){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"left-nav-city"},[i("Row",{attrs:{gutter:2}},[i("Col",{attrs:{span:"8"}},[i("Select",{staticClass:"search-top-left",model:{value:t.searchID,callback:function(e){t.searchID=e},expression:"searchID"}},t._l(t.searchCondition,function(e){return i("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1),t._v(" "),i("Col",{attrs:{span:"12"}},[i("Input",{staticClass:"search-top-right",attrs:{placeholder:"请输入ID或名称"},model:{value:t.searchInput,callback:function(e){t.searchInput=e},expression:"searchInput"}})],1),t._v(" "),i("Col",{staticStyle:{"text-align":"center"},attrs:{span:"4"}},[i("Button",{attrs:{type:"primary",shape:"circle",icon:"ios-search"},on:{click:t.searchCity}})],1)],1),t._v(" "),i("Row",[i("ButtonGroup",{staticStyle:{width:"100%"},attrs:{size:"large"}},[i("Button",{staticStyle:{width:"50%"},attrs:{type:t.btnTypesupplier},on:{click:t.btnSupplier}},[t._v("按供应商审核")]),t._v(" "),i("Button",{staticStyle:{width:"50%"},attrs:{type:t.btnTypeRegion},on:{click:t.btnRegion}},[t._v("按区域审核")])],1)],1),t._v(" "),i("Row",{staticStyle:{height:"88%",position:"relative"}},[t.listShow?i("Spin",{attrs:{size:"large",fix:""}}):t._e(),t._v(" "),i("Tabs",{directives:[{name:"show",rawName:"v-show",value:"supplier"==t.btnType,expression:"btnType=='supplier'"}],staticStyle:{height:"100%"},attrs:{type:"card",animated:!0},on:{"on-click":t.doClickSupplierTab},model:{value:t.chooseTabBySuppliers,callback:function(e){t.chooseTabBySuppliers=e},expression:"chooseTabBySuppliers"}},[i("TabPane",{attrs:{label:"供应商",name:"suppliers",disabled:t.supplierTabDisable[0]}},[t.supplierList&&t.supplierList.length>20?i("Row",[i("Input",{attrs:{placeholder:"输入关键词查询"},on:{"on-change":function(e){t.doListFilter(t.searchSupplier,"supplierList","supplierListFilter")}},model:{value:t.searchSupplier,callback:function(e){t.searchSupplier=e},expression:"searchSupplier"}})],1):t._e(),t._v(" "),t.supplierList&&t.supplierList.length>0?i("Menu",{ref:"supplierMenu",attrs:{theme:"light",width:"auto"},on:{"on-select":t.chooseSupplier}},t._l(t.supplierListFilter,function(e,s){return i("MenuItem",{key:s,attrs:{name:s}},[i("span",[t._v(t._s(e.name))]),t._v(" "),i("span",[t._v(t._s(e.matchedCount+"/"+e.matchedUncheckCount+"/"+e.unmatchedCount))])])})):i("Row",{staticStyle:{"font-size":"18px","text-align":"center"}},[t._v("\n            暂无数据\n        ")]),t._v(" "),i("Row",{attrs:{"class-name":"bottom-total"}},[i("span",[t._v("共计"+t._s(t.supplierList?t.supplierList.length:0)+"条")])])],1),t._v(" "),i("TabPane",{attrs:{label:"国家",name:"nation",disabled:t.supplierTabDisable[1]}},[i("Menu",{attrs:{theme:"light",width:"auto"},on:{"on-select":t.chooseNation}},t._l(t.nationListChooseBySuppliers,function(e,s){return i("MenuItem",{key:s,attrs:{name:e.id}},[i("span",[t._v(t._s(e.name))]),t._v(" "),i("span",[t._v(t._s(e.matchedCount+"/"+e.matchedUncheckCount+"/"+e.unmatchedCount))])])})),t._v(" "),i("Row",{attrs:{"class-name":"bottom-total"}},[i("span",[t._v("共计"+t._s(t.nationListChooseBySuppliers?t.nationListChooseBySuppliers.length:0)+"条")])])],1),t._v(" "),i("TabPane",{staticStyle:{height:"94%"},attrs:{label:"省份",name:"province",disabled:t.supplierTabDisable[2]}},[t.provinceListChooseBySuppliers&&t.provinceListChooseBySuppliers.length>20?i("Row",[i("Input",{attrs:{placeholder:"输入关键词查询"},on:{"on-change":function(e){t.doListFilter(t.searchProvinceBySuppliers,"provinceListChooseBySuppliers","provinceListChooseBySuppliersFilter")}},model:{value:t.searchProvinceBySuppliers,callback:function(e){t.searchProvinceBySuppliers=e},expression:"searchProvinceBySuppliers"}})],1):t._e(),t._v(" "),i("Row",{attrs:{"class-name":"menu-box-large"}},[i("Menu",{attrs:{theme:"light",width:"auto"},on:{"on-select":t.chooseProvince}},t._l(t.provinceListChooseBySuppliersFilter,function(e,s){return i("MenuItem",{key:s,attrs:{name:e.id}},[i("span",[t._v(t._s(e.name))]),t._v(" "),i("span",[t._v(t._s(e.matchedCount+"/"+e.matchedUncheckCount+"/"+e.unmatchedCount))])])}))],1),t._v(" "),i("Row",{attrs:{"class-name":"bottom-total"}},[i("span",[t._v("共计"+t._s(t.provinceListChooseBySuppliersFilter?t.provinceListChooseBySuppliersFilter.length:0)+"条")])])],1),t._v(" "),i("TabPane",{staticStyle:{height:"94%"},attrs:{label:"城市",name:"city",disabled:t.supplierTabDisable[3]}},[i("Row",{staticClass:"check-select"},[i("Select",{on:{"on-change":t.chooseStatebySupplier},model:{value:t.checkStateBySuppliers,callback:function(e){t.checkStateBySuppliers=e},expression:"checkStateBySuppliers"}},t._l(t.cityCondition,function(e){return i("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1),t._v(" "),t.cityListChooseBySuppliers&&t.cityListChooseBySuppliers.length>20?i("Row",[i("Input",{attrs:{placeholder:"输入关键词查询"},on:{"on-change":function(e){t.doListFilter(t.searchCityBySuppliers,"cityListChooseBySuppliers","cityListChooseBySuppliersFilter")}},model:{value:t.searchCityBySuppliers,callback:function(e){t.searchCityBySuppliers=e},expression:"searchCityBySuppliers"}})],1):t._e(),t._v(" "),i("Row",{attrs:{"class-name":"menu-box"}},[t.cityListChooseBySuppliersFilter.length>0?i("Menu",{attrs:{theme:"light",width:"auto"},on:{"on-select":t.chooseCity}},t._l(t.cityListChooseBySuppliersFilter,function(e,s){return i("MenuItem",{key:s,attrs:{name:s}},[i("span",[t._v(t._s(e.name))])])})):i("Row",{staticStyle:{"font-size":"18px","text-align":"center"}},[t._v("\n            暂无数据\n          ")])],1),t._v(" "),i("Row",{attrs:{type:"flex",justify:"center"}},[i("span",[t._v("共计"+t._s(t.cityTotalSuppliers)+"条")])])],1)],1),t._v(" "),i("Tabs",{directives:[{name:"show",rawName:"v-show",value:"region"==t.btnType,expression:"btnType=='region'"}],staticStyle:{height:"100%"},attrs:{type:"card",animated:!0},on:{"on-click":t.doClickRegionTab},model:{value:t.chooseTabByRegions,callback:function(e){t.chooseTabByRegions=e},expression:"chooseTabByRegions"}},[i("TabPane",{attrs:{label:"国家",name:"nation",disabled:t.regionTabDisable[0]}},[t.nationListChooseByRegions&&t.nationListChooseByRegions.length>0?i("Menu",{attrs:{theme:"light",width:"auto"},on:{"on-select":t.chooseNationCopy}},t._l(t.nationListChooseByRegions,function(e,s){return i("MenuItem",{key:s,attrs:{name:e.id}},[i("span",[t._v(t._s(e.name))]),t._v(" "),i("span",[t._v(t._s(e.matchedCount+"/"+e.matchedUncheckCount+"/"+e.unmatchedCount))])])})):i("Row",{staticStyle:{"font-size":"18px","text-align":"center"}},[t._v("\n            暂无数据\n        ")]),t._v(" "),t.nationListChooseByRegions?i("Row",{attrs:{"class-name":"bottom-total"}},[i("span",[t._v("共计"+t._s(t.nationListChooseByRegions?t.nationListChooseByRegions.length:0)+"条")])]):t._e()],1),t._v(" "),i("TabPane",{staticStyle:{height:"94%"},attrs:{label:"省份",name:"province",disabled:t.regionTabDisable[1]}},[t.provinceListChooseByRegions&&t.provinceListChooseByRegions.length>20?i("Row",[i("Input",{attrs:{placeholder:"输入关键词查询"},on:{"on-change":function(e){t.doListFilter(t.searchProvinceByRegions,"provinceListChooseByRegions","provinceListChooseByRegionsFilter")}},model:{value:t.searchProvinceByRegions,callback:function(e){t.searchProvinceByRegions=e},expression:"searchProvinceByRegions"}})],1):t._e(),t._v(" "),i("Row",{attrs:{"class-name":"menu-box-large"}},[i("Menu",{attrs:{theme:"light",width:"auto"},on:{"on-select":t.chooseProvinceCopy}},t._l(t.provinceListChooseByRegionsFilter,function(e,s){return i("MenuItem",{key:s,attrs:{name:e.id}},[i("span",[t._v(t._s(e.name))]),t._v(" "),i("span",[t._v(t._s(e.matchedCount+"/"+e.matchedUncheckCount+"/"+e.unmatchedCount))])])}))],1),t._v(" "),i("Row",{attrs:{"class-name":"bottom-total"}},[i("span",[t._v("共计"+t._s(t.provinceListChooseByRegionsFilter?t.provinceListChooseByRegionsFilter.length:0)+"条")])])],1),t._v(" "),i("TabPane",{staticStyle:{height:"94%"},attrs:{label:"城市",name:"city",disabled:t.regionTabDisable[2]}},[i("Row",{directives:[{name:"show",rawName:"v-show",value:t.isCheckStateByRegionsShow,expression:"isCheckStateByRegionsShow"}],staticClass:"check-select"},[i("Select",{on:{"on-change":t.chooseStatebyRegion},model:{value:t.checkStateByRegions,callback:function(e){t.checkStateByRegions=e},expression:"checkStateByRegions"}},t._l(t.cityCondition,function(e){return i("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1),t._v(" "),t.cityListChooseByRegions&&t.cityListChooseByRegions.length>20?i("Row",[i("Input",{attrs:{placeholder:"输入关键词查询"},on:{"on-change":function(e){t.doListFilter(t.searchCityByRegions,"cityListChooseByRegions","cityListChooseByRegionsFilter")}},model:{value:t.searchCityByRegions,callback:function(e){t.searchCityByRegions=e},expression:"searchCityByRegions"}})],1):t._e(),t._v(" "),i("Row",{attrs:{"class-name":"menu-box"}},[t.cityListChooseByRegions.length>0?i("Menu",{attrs:{theme:"light",width:"auto"},on:{"on-select":t.chooseCityCopy}},t._l(t.cityListChooseByRegionsFilter,function(e,s){return i("MenuItem",{key:s,attrs:{name:s}},[i("span",[t._v(t._s(e.name||e.cityName))]),t._v(" "),10==t.checkStateByRegions?i("span",[t._v(t._s(""+(e.unmatchedCount||"0")))]):i("span",[t._v(t._s(""+(e.matchedCount+"/"||"0")+(e.matchedUncheckCount||"0")))])])})):i("Row",{staticStyle:{"font-size":"18px","text-align":"center"}},[t._v("\n            暂无数据\n          ")])],1),t._v(" "),i("Row",{attrs:{type:"flex",justify:"center"}},[i("span",[t._v("共计"+t._s(t.cityTotalRegions)+"条")])])],1)],1)],1)],1)},staticRenderFns:[]},t.exports.render._withStripped=!0},186:function(t,e,i){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"tableWrap"},[i("div",{staticClass:"topTable"},[i("div",{staticClass:"title"},[t._v("城市审核列表")]),t._v(" "),i("div",{staticClass:"button"},[0!=t.cityApprovalList.length?i("Button",{attrs:{type:"primary",disabled:t.isNot20Check&&10!=t.cityTableType},on:{click:t.toSubmit1}},[t._v("提交")]):i("Button",{attrs:{type:"primary",disabled:""}},[t._v("提交")]),t._v(" "),10!=t.cityTableType&&0!=t.cityApprovalList.length?i("Button",{attrs:{type:"primary",disabled:t.is20Check},on:{click:t.toSubmit2}},[t._v("设为待审")]):t._e(),t._v(" "),0==t.cityApprovalList.length?i("Button",{attrs:{type:"primary",disabled:""}},[t._v("设为待审")]):t._e(),t._v(" "),i("Button",{attrs:{type:"primary",disabled:""}},[t._v("新增")])],1),t._v(" "),i("div",{staticClass:"total"},[t._v("共计"+t._s(t.cityTotalNum)+"条")]),t._v(" "),i("div",{staticClass:"table table1"},[i("div",{staticClass:"wrap wrapW1"},[i("div",{ref:"w1"},[i("table",{style:{"min-width":t.divWidth1+"px"}},[i("tr",[i("th",{staticStyle:{"border-top":"none"}},[10!=t.cityTableType?i("input",{directives:[{name:"model",rawName:"v-model",value:t.checkAll,expression:"checkAll"}],attrs:{type:"checkbox",disabled:t.isNot20Check},domProps:{checked:Array.isArray(t.checkAll)?t._i(t.checkAll,null)>-1:t.checkAll},on:{click:t.toggleCheckAll,__c:function(e){var i=t.checkAll,s=e.target,o=!!s.checked;if(Array.isArray(i)){var a=t._i(i,null);s.checked?a<0&&(t.checkAll=i.concat([null])):a>-1&&(t.checkAll=i.slice(0,a).concat(i.slice(a+1)))}else t.checkAll=o}}}):t._e()]),t._v(" "),t._l(t.cityHeaderData,function(e,s){return i("th",{key:s,staticStyle:{"border-top":"none"}},[t._v(t._s(e.title))])})],2),t._v(" "),t.cityCheckList&&10!=t.cityTableType&&t.JDCityApproval&&0!=t.cityApprovalList.length?i("tr",{staticClass:"fontColor"},[i("td"),t._v(" "),i("td",{on:{click:function(e){t.getInputValue(t.JDCityApproval)}}},[t._v(t._s(t.JDCityApproval.cityName))]),t._v(" "),i("td",[t._v(t._s(t.JDCityApproval.cityId))]),t._v(" "),i("td",[t._v(t._s(t.JDCityApproval.provinceName))]),t._v(" "),i("td",[t._v(t._s(t.JDCityApproval.countryName))]),t._v(" "),i("td",[t._v("京东")]),t._v(" "),i("td"),t._v(" "),i("td"),t._v(" "),i("td"),t._v(" "),i("td")]):t._e()])]),t._v(" "),i("div",{ref:"topDivH",style:{height:10==t.cityTableType?"85%":"71%"}},[t.cityCheckList&&t.cityApprovalList&&t.cityApprovalList.length>0?i("table",{style:{"min-width":t.divWidth1+"px"}},t._l(t.cityApprovalList,function(e,s){return i("tr",{key:s,class:[{trClass:20==e.mapStatus}]},[i("td",[""!=e.mapStatus?i("input",{directives:[{name:"model",rawName:"v-model",value:e.checked,expression:"item.checked"}],attrs:{type:"checkbox",disabled:20==e.mapStatus?t.isNot20Check:t.is20Check},domProps:{checked:Array.isArray(e.checked)?t._i(e.checked,null)>-1:e.checked},on:{click:t.clearRadioValue,__c:function(i){var s=e.checked,o=i.target,a=!!o.checked;if(Array.isArray(s)){var n=t._i(s,null);o.checked?n<0&&(e.checked=s.concat([null])):n>-1&&(e.checked=s.slice(0,n).concat(s.slice(n+1)))}else e.checked=a}}}):t._e()]),t._v(" "),i("td",{on:{click:function(i){t.getInputValue(e)}}},[t._v(t._s(e.cityName))]),t._v(" "),i("td",[t._v(t._s(e.cityId))]),t._v(" "),i("td",[t._v(t._s(e.provinceName))]),t._v(" "),i("td",[t._v(t._s(e.countryName))]),t._v(" "),i("td",[t._v(t._s(e.supplierName))]),t._v(" "),i("td",[t._v(t._s(t.getStatusValue(e.mapStatus)))]),t._v(" "),i("td",[t._v(t._s(e.lastOperator))]),t._v(" "),i("td",[t._v(t._s(e.lastModifyTime))]),t._v(" "),i("td",{on:{click:function(i){t.getCheckData(e.geoMapId)}}},[t._v("查看")])])})):t._e(),t._v(" "),t.cityCheckList&&0!=t.cityApprovalList.length?t._e():i("div",{staticClass:"noData"},[t._v("\n                        暂无数据\n                    ")])])]),t._v(" "),t.citySyncMappingDataState?i("Spin",{attrs:{fix:""}},[i("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"load-c",size:"18"}}),t._v(" "),i("div",[t._v("Loading")])],1):t._e(),t._v(" "),t.cityLoading?i("Spin",{attrs:{fix:""}},[i("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"load-c",size:"18"}}),t._v(" "),i("div",[t._v("Loading")])],1):t._e()],1)]),t._v(" "),i("div",{staticClass:"bottomTable"},[i("div",{staticClass:"title"},[t._v("相似城市列表")]),t._v(" "),i("div",{staticClass:"button"},[i("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"JD数据模糊比配"},model:{value:t.cityValue,callback:function(e){t.cityValue=e},expression:"cityValue"}}),t._v(" "),i("Button",{attrs:{type:"primary"},on:{click:t.getSimilar}},[t._v("Go")])],1),t._v(" "),i("div",{staticClass:"total"},[t._v("共计"+t._s(t.similarTotalNum)+"条")]),t._v(" "),i("div",{staticClass:"table table2"},[i("div",{staticClass:"wrap wrapW2"},[i("div",{ref:"w2"},[i("table",{style:{"min-width":t.divWidth2+"px"}},[i("tr",[i("th"),t._v(" "),t._l(t.similarHeaderData,function(e,s){return i("th",{key:s},[t._v(t._s(e.title))])})],2)])]),t._v(" "),i("div",{ref:"divH",staticStyle:{height:"80%"}},[t.similarCityData.length>0?i("table",{ref:"tableH",style:{"min-width":t.divWidth2+"px"}},t._l(t.similarCityData,function(e,s){return i("tr",{key:s},[i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.similar,expression:"similar"}],attrs:{type:"radio"},domProps:{value:s,checked:t._q(t.similar,s)},on:{change:function(i){t.radioSelect(e)},__c:function(e){t.similar=s}}})]),t._v(" "),i("td",{domProps:{innerHTML:t._s(t.highlight(e.cityName,t.cityValue))}}),t._v(" "),i("td",[t._v(t._s(e.cityId))]),t._v(" "),i("td",[t._v(t._s(e.provinceName))]),t._v(" "),i("td",[t._v(t._s(e.countryName))])])})):t._e(),t._v(" "),0==t.similarCityData?i("div",{staticClass:"noData"},[t._v("\n                        暂无数据\n                    ")]):t._e()])]),t._v(" "),t.spinShow?i("Spin",{attrs:{fix:""}},[i("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"load-c",size:"18"}}),t._v(" "),i("div",[t._v("Loading")])],1):t._e()],1)]),t._v(" "),i("Modal",{attrs:{width:"500",closable:!1},on:{"on-ok":t.ok,"on-cancel":t.cancel},model:{value:t.modelShow,callback:function(e){t.modelShow=e},expression:"modelShow"}},[i("p",{staticStyle:{"font-size":"16px"}},[t._v(t._s(t.message))])]),t._v(" "),i("Modal",{attrs:{title:"查看日志",width:"800"},model:{value:t.checkShow,callback:function(e){t.checkShow=e},expression:"checkShow"}},[i("div",{staticClass:"table table1",staticStyle:{height:"300px","margin-top":"10px"}},[i("div",{staticClass:"wrap wrapW1 logTable",staticStyle:{"min-width":"100%"}},[i("div",{ref:"w3"},[i("table",{staticStyle:{width:"767px"}},[i("tr",t._l(t.checkTitle,function(e,s){return i("th",{key:s,staticStyle:{"border-top":"none"}},[t._v(t._s(e.title))])}))])]),t._v(" "),i("div",{staticStyle:{"overflow-x":"hidden"}},[0!=t.checkData.length?i("table",{staticStyle:{width:"767px"}},t._l(t.checkData,function(e,s){return i("tr",{key:s},[i("td",[t._v(t._s(e.oldString))]),t._v(" "),i("td",[t._v(t._s(e.newString))]),t._v(" "),i("td",[t._v(t._s(e.operateTime))]),t._v(" "),i("td",[t._v(t._s(e.operatorName))])])})):t._e(),t._v(" "),0==t.checkData.length?i("div",{staticClass:"noData"},[t._v("\n                        暂无数据\n                    ")]):t._e()])]),t._v(" "),t.spinShow?i("Spin",{attrs:{fix:""}},[i("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"load-c",size:"18"}}),t._v(" "),i("div",[t._v("Loading")])],1):t._e()],1),t._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[t._e()],1)])],1)},staticRenderFns:[]},t.exports.render._withStripped=!0},200:function(t,e,i){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"layout-row"},[i("Row",{staticClass:"layout-row"},[i("Col",{staticClass:"layout-content-main-right",attrs:{span:"18",push:"6"}},[i("city")],1),t._v(" "),i("Col",{staticClass:"layout-content-main-left",attrs:{span:"6",pull:"18"}},[i("left-nav")],1)],1)],1)},staticRenderFns:[]},t.exports.render._withStripped=!0},55:function(t,e,i){i(150);var s=i(7)(i(100),i(200),"data-v-bcc86982",null);s.options.__file="E:\\devCode\\hotel-man\\src\\views\\pages\\Mapping\\cityMapping.vue",s.esModule&&Object.keys(s.esModule).some(function(t){return"default"!==t&&"__esModule"!==t}),s.options.functional,t.exports=s.exports},92:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{searchID:"cityId",searchCondition:[{value:"cityId",label:"城市id"},{value:"cityName",label:"城市名称"}],searchInput:"",searchSupplier:"",searchProvinceBySuppliers:"",searchProvinceByRegions:"",searchCityBySuppliers:"",searchCityByRegions:"",btnType:"supplier",getDataType:"supplier",chooseTabBySuppliers:"",chooseTabByRegions:"",supplierTabDisable:[!1,!0,!0,!0],regionTabDisable:[!1,!0,!0],supplierMenuSelect:0,listShow:!1,checkStateBySuppliers:20,checkStateByRegions:20,isCheckStateByRegionsShow:!0,cityCondition:[{value:20,label:"已聚待审"},{value:30,label:"已聚已审"},{value:10,label:"未聚待审"}],currentSupplierId:0,currentProvinceIdBySuppliers:0,currentProvinceIdByRegions:0,currentCityIndexBySuppliers:0,currentCityIndexByRegions:0,supplierList:[],supplierListFilter:[],nationListChooseBySuppliers:[],nationListChooseByRegions:[],provinceListChooseBySuppliers:[],provinceListChooseBySuppliersFilter:[],provinceListChooseByRegions:[],provinceListChooseByRegionsFilter:[],cityListChooseBySuppliers:[],cityListChooseBySuppliersFilter:[],cityListChooseByRegions:[],cityListChooseByRegionsFilter:[]}},watch:{citySyncMappingDataState:function(t,e){t&&this.refreshData()}},mounted:function(){var t=this;this.$http.post("/mapping/cityMapping/navTabSearch",{sourceType:20,dimensionType:10}).then(function(e){t.supplierListFilter=t.supplierList=e.data.body}).catch(function(e){t.supplierList=[]}),this.$http.post("/mapping/cityMapping/navTabSearch",{sourceType:10,dimensionType:20}).then(function(e){t.nationListChooseByRegions=e.data.body})},computed:{btnTypesupplier:function(){return"supplier"==this.btnType?"primary":"ghost"},btnTypeRegion:function(){return"region"==this.btnType?"primary":"ghost"},cityTotalSuppliers:function(){return this.cityListChooseBySuppliersFilter?this.cityListChooseBySuppliersFilter.length:0},cityTotalRegions:function(){return this.cityListChooseByRegionsFilter?this.cityListChooseByRegionsFilter.length:0},citySyncMappingDataState:function(){return this.$store.getters.citySyncMappingDataState}},methods:{reset:function(t){var e=this;"suppliers"==t?this.$http.post("/mapping/cityMapping/navTabSearch",{sourceType:20,dimensionType:10}).then(function(t){e.supplierListFilter=e.supplierList=t.data.body}).then(function(t){e.checkStateBySuppliers=20,e.$store.commit("CITY_TABLETYPE",20)}).catch(function(t){e.supplierList=[]}):this.$http.post("/mapping/cityMapping/navTabSearch",{sourceType:10,dimensionType:20}).then(function(t){e.nationListChooseByRegions=t.data.body}).then(function(t){e.checkStateByRegions=20,e.$store.commit("CITY_TABLETYPE",20)})},changeState:function(){this.$store.commit("CITY_SYNC_MAPPING_DATA_STATE")},refreshData:function(){var t=this;this.btnType=this.getDataType,this.listShow=!0,"supplier"==this.getDataType?(this.chooseTabBySuppliers="city",this.chooseProvince(this.currentProvinceIdBySuppliers,this.checkStateBySuppliers).then(function(e){return t.listShow=!1,e?t.chooseCity(t.currentCityIndexBySuppliers):t.chooseCity(-1)}).then(function(e){t.$store.commit("CITY_SYNC_MAPPING_DATA_STATE")})):(this.chooseTabByRegions="city",this.chooseProvinceCopy(this.currentProvinceIdByRegions,this.checkStateByRegions).then(function(e){return t.listShow=!1,e?t.chooseCityCopy(t.currentCityIndexByRegions):t.chooseCityCopy(-1)}).then(function(e){t.$store.commit("CITY_SYNC_MAPPING_DATA_STATE")}))},listFilter:function(t,e){var i=[];return""==t?i=e:(e.map(function(e,s){e.name.indexOf(t)>-1&&i.push(e)}),i)},doListFilter:function(t,e,i){this[i]=this.listFilter(t,this[e])},btnSupplier:function(){this.btnType="supplier",this.$store.commit("CITY_TABLETYPE",20)},btnRegion:function(){this.$store.commit("CITY_TABLETYPE",20),this.btnType="region"},doClickSupplierTab:function(t){"suppliers"==t&&(this.searchSupplier="",this.searchProvinceBySuppliers="",this.searchCityBySuppliers="",this.searchHotelBySuppliers="",this.checkStateBySuppliers=20,this.reset("suppliers"))},doClickRegionTab:function(t){"nation"==t&&(this.searchProvinceByRegions="",this.searchCityeByRegions="",this.searchHotelByRegions="",this.reset("regions"),this.checkStateByRegions=20)},chooseSupplier:function(t){var e=this;this.chooseTabBySuppliers="nation",this.currentSupplierId=this.supplierList[t].id,this.$http.post("/mapping/cityMapping/navTabSearch",{sourceType:20,dimensionType:20,supplierCode:this.supplierList[t].id,times:1}).then(function(t){e.nationListChooseBySuppliers=t.data.body})},chooseNation:function(t){var e=this;this.chooseTabBySuppliers="province",this.$http.post("/mapping/cityMapping/navTabSearch",{sourceType:20,dimensionType:30,countryCode:t,supplierCode:this.currentSupplierId}).then(function(t){e.provinceListChooseBySuppliersFilter=e.provinceListChooseBySuppliers=t.data.body})},chooseProvince:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return this.currentProvinceIdBySuppliers=t,this.chooseTabBySuppliers="city",this.$http.post("/mapping/cityMapping/navTabSearch",{sourceType:20,dimensionType:40,provinceCode:t,mapStatus:i,supplierCode:this.currentSupplierId}).then(function(t){return e.cityListChooseBySuppliersFilter=e.cityListChooseBySuppliers=t.data.body||[],e.cityListChooseBySuppliers.length>0})},chooseStatebySupplier:function(t){"suppliers"!=this.chooseTabBySuppliers&&(this.$store.commit("CITY_TABLETYPE",t),this.chooseProvince(this.currentProvinceIdBySuppliers,t))},chooseCity:function(t){var e=this,i=void 0;if(i=this.searchCityBySuppliers?t>this.cityListChooseBySuppliersFilter.length-1:t>this.cityListChooseBySuppliers.length-1,-1==t||i)return this.$store.commit("CITY_CHECK_LIST",null),this.getDataType="supplier";this.currentCityIndexBySuppliers=t;var s=this.searchCityBySuppliers?this.cityListChooseBySuppliersFilter[t].id:this.cityListChooseBySuppliers[t].id;return this.$http.post("/mapping/cityMapping/queryCityApprovalList",{cityCode:s,supplierCode:this.currentSupplierId,mapStatus:this.checkStateBySuppliers,sourceType:20}).then(function(t){e.$store.commit("CITY_CHECK_LIST",t.data.body),e.getDataType="supplier"})},chooseNationCopy:function(t){var e=this;this.chooseTabByRegions="province",this.$http.post("/mapping/cityMapping/navTabSearch",{sourceType:10,dimensionType:30,countryCode:t}).then(function(t){e.provinceListChooseByRegionsFilter=e.provinceListChooseByRegions=t.data.body})},chooseProvinceCopy:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;this.chooseTabByRegions="city",this.currentProvinceIdByRegions=parseInt(t);var s=this.$http.post("/mapping/cityMapping/navTabSearch",{sourceType:10,dimensionType:40,provinceCode:t,mapStatus:i}).then(function(t){return e.cityListChooseByRegionsFilter=e.cityListChooseByRegions=t.data.body||[],e.cityListChooseByRegions.length>0});return this.isCheckStateByRegionsShow=!0,s},chooseStatebyRegion:function(t){"nation"!=this.chooseTabByRegions&&(this.$store.commit("CITY_TABLETYPE",t),this.chooseProvinceCopy(this.currentProvinceIdByRegions,t))},chooseCityCopy:function(t){var e=this,i=void 0;if(i=this.searchCityByRegions?t>this.cityListChooseByRegionsFilter.length-1:t>this.cityListChooseByRegions.length-1,-1==t||i)return this.$store.commit("CITY_CHECK_LIST",null),this.getDataType="region";if(this.currentCityIndexByRegions=t,this.searchCityeByRegions)var s=this.cityListChooseByRegionsFilter[t].id||this.cityListChooseByRegionsFilter[t].cityId,o=this.cityListChooseByRegionsFilter[t].name||this.cityListChooseByRegionsFilter[t].cityName;else var s=this.cityListChooseByRegions[t].id||this.cityListChooseByRegions[t].cityId,o=this.cityListChooseByRegions[t].name||this.cityListChooseByRegions[t].cityName;if(10==this.checkStateByRegions)var a=this.$http.post("/mapping/cityMapping/queryCityApprovalList",{provinceId:this.currentProvinceIdByRegions,cityName:o,mapStatus:this.checkStateByRegions,sourceType:10}).then(function(t){e.$store.commit("CITY_CHECK_LIST",t.data.body||null),e.getDataType="region"});else a=this.$http.post("/mapping/cityMapping/queryCityApprovalList",{cityId:s,mapStatus:this.checkStateByRegions,sourceType:10}).then(function(t){e.$store.commit("CITY_CHECK_LIST",t.data.body||null),e.getDataType="region"});return a},searchCity:function(){var t=this;if(""==this.searchInput)return void this.$Notice.warning({title:"请输入查询内容",desc:"查询内容不能为空"});if(this.isCheckStateByRegionsShow=!1,this.checkStateByRegions=20,"cityId"===this.searchID){if(!/^[0-9]*$/.test(this.searchInput))return void this.$Notice.warning({title:"请输入正确的城市id",desc:"请输入数字id"});this.listShow=!0,this.$http.get("/mapping/cityMapping/navSearch?cityId="+this.searchInput).then(function(e){t.listShow=!1,Array.isArray(e.data.body)?t.cityListChooseByRegionsFilter=t.cityListChooseByRegions=e.data.body||[]:t.cityListChooseByRegionsFilter=t.cityListChooseByRegions=e.data.body?[e.data.body]:[],200!=e.data.head.code||t.cityListChooseByRegions.length||t.$Notice.warning({title:"没有找到响应结果",desc:"请重新输入查询条件"})}).then(function(e){t.btnType="region",t.chooseTabByRegions="city"})}else{if(!/^[\u4E00-\u9FA5]{1,9}$/.test(this.searchInput)||"市"===this.searchInput)return void this.$Notice.warning({title:"请输入正确的城市名称",desc:'需输入正确的中文名称,注意不能只输入一个"市"字'});this.listShow=!0,this.$http.get("/mapping/cityMapping/navSearch?cityName="+this.searchInput).then(function(e){t.listShow=!1,Array.isArray(e.data.body)?t.cityListChooseByRegionsFilter=t.cityListChooseByRegions=e.data.body||[]:t.cityListChooseByRegionsFilter=t.cityListChooseByRegions=e.data.body?[e.data.body]:[],200!=e.data.head.code||t.cityListChooseByRegions.length||t.$Notice.warning({title:"没有找到响应结果",desc:"请重新输入查询条件"})}).then(function(e){t.btnType="region",t.chooseTabByRegions="city"}).catch(function(e){t.$Notice.error({title:"接口异常",desc:"请稍后再试"})})}}}}},97:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{similar:"",cityValue:"",classShow:!1,cityHeaderData:[{title:"城市名称",key:"cityName"},{title:"城市ID",key:"cityId"},{title:"省份",key:"provinceName"},{title:"国家",key:"countryName"},{title:"供应商名称",key:"supplierName"},{title:"聚合状态",key:"mapStatus"},{title:"操作人",key:"lastOperator"},{title:"操作时间",key:"lastModifyTime"},{title:"操作",key:"operator"}],cityApprovalList:[],similarHeaderData:[{title:"城市名称",key:"cityName"},{title:"城市Id",key:"cityId"},{title:"省份",key:"provinceName"},{title:"国家",key:"countryName"}],similarCityData:[],checkTitle:[{title:"原值",key:"originalValue"},{title:"新值",key:"modifedValue"},{title:"操作时间",key:"lastModifyTime"},{title:"操作人",key:"lastOperator"}],checkData:[],checkAll:!1,submitData:{checkBoxData:[],radioData:[]},modelShow:!1,checkShow:!1,message:"",divWidth1:"",divWidth2:"",cityTableType:20,buttonType:0,spinShow:!1,arrListLen:0,divH:null,tableScrollH:null,pageNum:1,pages:null,similarTotalNum:0,topDivH:null,cityLoading:!1}},created:function(){var t=this;this.$store.subscribe(function(e,i){"CITY_CHECK_LIST"===e.type&&t.getCityApprovalList()})},mounted:function(){this.divWidth1=this.$refs.w1.offsetWidth,this.divWidth2=this.$refs.w2.offsetWidth,this.topDivH=this.$refs.topDivH,this.divH=this.$refs.divH,this.divH.addEventListener("scroll",this.addMore)},computed:{cityCheckList:function(){return this.$store.getters.cityCheckList},JDCityApproval:function(){return this.$store.getters.cityCheckList.jdCityApproval},is20Check:function(){for(var t=0;t<this.cityApprovalList.length;t++){var e=this.cityApprovalList[t];if(20==e.mapStatus&&e.checked)return!0}return!1},isNot20Check:function(){for(var t=0;t<this.cityApprovalList.length;t++){var e=this.cityApprovalList[t];if(20!=e.mapStatus&&e.checked)return!0}return!1},cityTotalNum:function(){return this.cityApprovalList.length},citySyncMappingDataState:function(){return this.$store.getters.citySyncMappingDataState},isShrinkStatus:function(){return this.$store.getters.isShrinkStatus}},watch:{cityApprovalList:{handler:function(){if(0!=this.arrListLen){var t=!0;if(20==this.cityTableType||30==this.cityTableType){for(var e=0;e<this.cityApprovalList.length;e++){var i=this.cityApprovalList[e];if(20===i.mapStatus&&!i.checked){t=!1;break}}this.checkAll=t}}},deep:!0},isShrinkStatus:function(t,e){t||(this.divWidth1=1118,this.divWidth2=860)}},methods:{addMore:function(){var t=this,e=this.divH.offsetHeight,i=this.divH.scrollTop;if(this.$refs.tableH&&(this.tableScrollH=this.$refs.tableH.scrollHeight,this.tableScrollH-e-i<=1)){if(++this.pageNum>this.pages)return;this.$http.get("/resource/geoCommon/jdCityList",{params:{cityName:this.cityValue,pageNum:this.pageNum,pageSize:20}}).then(function(e){200==e.data.head.code&&(t.similarCityData=t.similarCityData.concat(e.data.body.cityList))}).catch(function(t){})}},getCityApprovalList:function(){var t=this;if(null!=this.cityCheckList&&this.$store.getters.cityCheckList.cityApprovalList){this.cityApprovalList=this.$store.getters.cityCheckList.cityApprovalList;for(var e=[],i=0;i<this.cityApprovalList.length;i++){var s=this.cityApprovalList[i];20==s.mapStatus&&e.push(s)}this.arrListLen=e.length,this.cityTableType=this.$store.getters.cityTableType,this.similarCityData=[],this.submitData.radioData=[],this.similar="",this.cityValue="",this.topDivH.scrollTop=0,this.similarTotalNum=0}this.cityApprovalList.forEach(function(e,i){t.$set(e,"checked",!1)}),this.$refs.w1&&(this.divWidth1=this.$refs.w1.offsetWidth)},toggleCheckAll:function(){for(var t=0;t<this.cityApprovalList.length;t++){var e=this.cityApprovalList[t];20!=this.cityTableType&&30!=this.cityTableType||20==e.mapStatus&&(e.checked=this.checkAll)}this.pushCheckBoxData()},getInputValue:function(t){this.cityValue=t.cityName,this.toSearch()},getSimilar:function(){if(""==this.cityValue)return void this.instance("warning");this.toSearch()},toSearch:function(){var t=this;this.similar="",this.submitData.radioData=[],this.pageNum=1,this.divH.scrollTop=0,this.divWidth2=this.$refs.w2.offsetWidth,this.spinShow=!0,this.$http.get("/resource/geoCommon/jdCityList?cityName="+this.cityValue+"&pageNum=1&pageSize=20").then(function(e){t.spinShow=!1,200==e.data.head.code&&(t.pages=e.data.body.pages,t.similarTotalNum=e.data.body.total,t.similarCityData=e.data.body.cityList)}).catch(function(t){})},highlight:function(t,e){var i=t.indexOf(e),s=t.substring(0,i),o=t.substring(i+e.length);return-1==i||o===t?t:s+'<span style="color: #2d8cf0;">'+e+"</span>"+this.highlight(o,e)},getForData:function(t){for(var e=0;e<this.cityApprovalList.length;e++)this.cityApprovalList[e].mapStatus==t&&this.cityApprovalList[e].checked&&this.submitData.checkBoxData.push(this.cityApprovalList[e].geoMapId)},toSubmit1:function(){this.buttonType=1,this.submitData.checkBoxData=[];var t=this.submitData.radioData[0];10!=this.cityTableType&&void 0==t&&this.submitData.radioData.push(this.JDCityApproval.cityId),20!=this.cityTableType&&30!=this.cityTableType||(this.getForData(20),0==this.submitData.checkBoxData.length?this.instance("info","已聚待审"):(this.modelShow=!0,this.message="请确认是否将已选择城市提交？")),10==this.cityTableType&&(this.getForData(10),0!=this.submitData.checkBoxData.length&&0!=this.submitData.radioData.length?(this.modelShow=!0,this.message="请确认是否将已选择城市提交？"):this.instance("info","未聚待审"))},toSubmit2:function(){this.buttonType=2,this.submitData.checkBoxData=[],20!=this.cityTableType&&30!=this.cityTableType||(this.getForData(30),0==this.submitData.checkBoxData.length?this.instance("info","已聚已审"):(this.modelShow=!0,this.message="请确认是否将已选择城市设为待审？"))},radioSelect:function(t){this.submitData.radioData=[],this.submitData.radioData.push(t.cityId)},ok:function(){var t=this;this.cityLoading=!0;var e=this.submitData.checkBoxData.join(","),i=this.submitData.radioData[0];1==this.buttonType&&10!=this.cityTableType&&this.$http.post("/mapping/cityMapping/approve",{geoMapIds:e,geoId:i}).then(function(e){t.cityLoading=!1,t.modelShow=!1,200==e.data.head.code&&(t.$store.commit("CITY_SYNC_MAPPING_DATA_STATE",!0),t.cityValue="")}).catch(function(t){}),1==this.buttonType&&10==this.cityTableType&&this.$http.post("/mapping/cityMapping/approve",{geoMapIds:e,geoId:i}).then(function(e){t.cityLoading=!1,t.modelShow=!1,200==e.data.head.code&&(t.$store.commit("CITY_SYNC_MAPPING_DATA_STATE",!0),t.cityValue="")}).catch(function(t){}),2==this.buttonType&&this.$http.post("/mapping/cityMapping/matchedUncheck",{geoMapIds:e}).then(function(e){t.cityLoading=!1,t.modelShow=!1,200==e.data.head.code&&(t.$store.commit("CITY_SYNC_MAPPING_DATA_STATE",!0),t.cityValue="")}).catch(function(t){})},cancel:function(){},instance:function(t,e){var i='<p style="font-size: 16px;">请必须选择一个京东城市和至少一个(含)供应商城市"'+e+'"的数据</p>';switch(t){case"info":this.$Modal.info({content:i});break;case"warning":this.$Modal.warning({content:'<p style="font-size: 16px;">请输入城市名称</p>'})}},getStatusValue:function(t){switch(t){case 10:return"未聚待审";case 20:return"已聚待审";case 30:return"已聚已审"}},getCheckData:function(t){var e=this;this.checkData=[],this.spinShow=!0,this.checkShow=!0,this.$http.get("/mapping/log/getLogListByDataId?dataId="+t+"&dataType=10").then(function(t){if(e.spinShow=!1,200==t.data.head.code)for(var i=t.data.body,s=0;s<i.length;s++)for(var o=0;o<i[s].logDetailList.length;o++)e.checkData.push(i[s].logDetailList[o])}).catch(function(t){})},clearRadioValue:function(){this.pushCheckBoxData()},pushCheckBoxData:function(){this.submitData.checkBoxData=[];for(var t=0;t<this.cityApprovalList.length;t++){var e=this.cityApprovalList[t];e.checked&&this.submitData.checkBoxData.push(e)}0==this.submitData.checkBoxData.length&&(this.similar="",this.submitData.radioData=[])}}}}});